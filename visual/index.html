<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>project.js</title>

    <link rel="stylesheet" href="./css/style.css" />
    <link rel="stylesheet" href="./lib/themes/jquery.ui.all.css" />

    <script type="text/javascript" src="./lib/raphael-min.js"></script>
    <script type="text/javascript" src="./lib/es5-shim.min.js"></script>
    <script type="text/javascript" src="./lib/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="./lib/state-machine.min.js"></script>
    <script type="text/javascript" src="./lib/async.min.js"></script>

    <script type="text/javascript" src="./lib/ui/jquery.ui.core.min.js"></script>
    <script type="text/javascript" src="./lib/ui/jquery.ui.widget.min.js"></script>
    <script type="text/javascript" src="./lib/ui/jquery.ui.mouse.min.js"></script>
    <script type="text/javascript" src="./lib/ui/jquery.ui.draggable.min.js"></script>
    <script type="text/javascript" src="./lib/ui/jquery.ui.accordion.min.js"></script>
    <script type="text/javascript" src="./lib/ui/jquery.ui.slider.min.js"></script>
    <script type="text/javascript" src="./lib/pathfinding-browser.min.js"></script>

    <script type="text/javascript" src="./js/view.js"></script>
    <script type="text/javascript" src="./js/controller.js"></script>
    <script type="text/javascript" src="./js/panel.js"></script>
    <script type="text/javascript" src="./js/main.js"></script>
    <script>
window.onload = function () {
    var input = document.getElementById("number1Input");
    var apiKey = "WMHQWWZOEF3ZGIX1";
    var fieldId = "1";

    function updateController(value) {
        if (value === 1) {
            Controller.setFirePos(12,2);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, false)
            Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
          
            Controller.setWalkableAt(6, 0, true);
            Controller.setEndPos(6,0);          
        }

        if (value === 2) {
            Controller.setFirePos(12,2);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, false)
          Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(2, 4, true);
            Controller.setEndPos(2,4);
        }
        if (value === 3) {
            Controller.setFirePos(12,2);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, false)
          Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(2, 8, true);
            Controller.setEndPos(2,8);
        }
        if (value === 4) {
            Controller.setFirePos(12,2);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, false)
          Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(6, 12, true);
            Controller.setEndPos(6,12);
        }
        if (value === 5) {
            Controller.setFirePos(12,2);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, false)
          Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(2, 4, false)
              
            Controller.setWalkableAt(10, 12, true);
            Controller.setEndPos(10,12);
        }
        if (value === 6) {
            Controller.setFirePos(12,2);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, false)
          Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(14, 8, true);
            Controller.setEndPos(14,8);
        }

     
         if (value === 7) {
            Controller.setFirePos(8,6);
            Controller.setEndPos(0,0);
           Controller.setWalkableAt(10, 4, true)
           Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
          
            Controller.setWalkableAt(6, 0, true);
            Controller.setEndPos(6,0);          
        }

        if (value === 8) {
            Controller.setFirePos(8,6);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
          Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(2, 4, true);
            Controller.setEndPos(2,4);
        }
        if (value === 9) {
            Controller.setFirePos(8,6);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
          Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(2, 8, true);
            Controller.setEndPos(2,8);
        }
        if (value === 10) {
            Controller.setFirePos(8,6);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
          Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(6, 12, true);
            Controller.setEndPos(6,12);
        }
        if (value === 11) {
            Controller.setFirePos(8,6);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
          Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(2, 4, false)
              
            Controller.setWalkableAt(10, 12, true);
            Controller.setEndPos(10,12);
        }
        if (value === 12) {
            Controller.setFirePos(8,6);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
          Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(14, 8, true);
            Controller.setEndPos(14,8);
        }
        if (value === 13) {
            Controller.setFirePos(8,6);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
          Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(14, 4, true);
            Controller.setEndPos(14,4);
        }
        if (value === 14) {
            Controller.setFirePos(8,10);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
          Controller.setWalkableAt(8, 8, true)
            Controller.setWalkableAt(8, 8, false)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(10, 0, true);
            Controller.setEndPos(10,0);
        }
        if (value === 15) {
            Controller.setFirePos(8,10);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
            Controller.setWalkableAt(8, 8, false)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(10, 0, false);
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(6, 0, true);
            Controller.setEndPos(6,0);
        }
        if (value === 16) {
            Controller.setFirePos(8,10);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
            Controller.setWalkableAt(8, 8, false)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(2, 4, true);
            Controller.setEndPos(2,4);
        }
        if (value === 17) {
            Controller.setFirePos(8,10);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
            Controller.setWalkableAt(8, 8, false)
            Controller.setWalkableAt(10,0, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(2, 8, true);
            Controller.setEndPos(2,8);
        }
        if (value === 18) {
            Controller.setFirePos(8,10);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
            Controller.setWalkableAt(8, 8, false)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(6, 12, true);
            Controller.setEndPos(6,12);
        }
        if (value === 19) {
            Controller.setFirePos(8,10);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
            Controller.setWalkableAt(8, 8, false)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 0, false)
              
            Controller.setWalkableAt(10, 12, true);
            Controller.setEndPos(10,12);
        }
        if (value === 20) {
            Controller.setFirePos(8,10);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
            Controller.setWalkableAt(8, 8, false)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(14, 8, true);
            Controller.setEndPos(14,8);
        }
        if (value === 21) {
            Controller.setFirePos(8,10);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
            Controller.setWalkableAt(8, 8, false)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(10, 0, false)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(14, 4, true);
            Controller.setEndPos(14,4);
        }
        if (value === 22) {
            Controller.setFirePos(8,10);
            Controller.setEndPos(0,0);
            Controller.setWalkableAt(10, 4, true)
            Controller.setWalkableAt(8, 8, false)
            Controller.setWalkableAt(2, 8, false)
            Controller.setWalkableAt(6, 0, false);
            Controller.setWalkableAt(14, 8, false)
            Controller.setWalkableAt(14, 4, false)
            Controller.setWalkableAt(2, 4, false)
            Controller.setWalkableAt(6, 12, false)
            Controller.setWalkableAt(10, 12, false)
              
            Controller.setWalkableAt(10, 0, true);
            Controller.setEndPos(10,0);
        }
      
    }

    function handleResponse(response) {
        if (response && response.field1 !== undefined) {
            var value = parseInt(response.field1);
            if (!isNaN(value)) {
                input.value = value;
                updateController(value);
            }
        }
    }

    function updateValue() {
        var url = "https://api.thingspeak.com/channels/2096127/fields/" + fieldId + "/last.json?api_key=" + apiKey;
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                var response = JSON.parse(xhr.responseText);
                handleResponse(response);
            }
        };

        xhr.open("GET", url, true);
        xhr.send();
    }

    // 初次載入時更新一次數值
    updateValue();

    // 使用 addEventListener 監聽 input 的 change 事件
    input.addEventListener('change', function() {
        var value = parseInt(this.value);
        updateController(value);
    });

    // 使用 setInterval 定期更新數值
    setInterval(updateValue, 10000);
};


</script>
<style>
body {
    background-image: url("https://hackmd.io/_uploads/SJa1cRxpn.png");
    background-size: cover;  /* 調整圖片大小以填滿整個元素 */
    background-repeat: no-repeat;  /* 避免圖片重複 */
}
</style>
    
  </head>
  <body>
    //<img src="https://hackmd.io/_uploads/B1UgTjfaa.png" />
    <div id="draw_area"></div>

    <div id="instructions_panel" class="panel">
      <header>
        <h2 class="header_title">Instructions</h2>
        <span id="hide_instructions">hide</span>
      </header>
      the <span class="green">green</span> node is exit position. <br>
      the <span class="red">red</span> node is fire position. <br>
      the <span class="pink">pink</span> node is your position. <br>
      Click Start Search in the lower-right corner to start the animation.
    </div>
   
    <div id="algorithm_panel" class="panel right_panel">
      <header><h2 class="header_title">Algorithm</h2></header>

      <div class="accordion">
        <h3 id="astar_header"><a href="#">A*</a></h3>
        <div id="astar_section" class="finder_section">
          <header class="option_header">
            <h3>Heuristic</h3>
          </header>
          <div id="astar_heuristic" class="sub_options">
            <input type="radio" name="astar_heuristic" value="manhattan" checked />
            <label class="option_label">Manhattan</label> <br>
            <input type="number" id="number1Input">
          </div>
        </div>

      </div>

      </div><!-- .accordion -->
    </div><!-- #algorithm_panel -->
     
    
    <div id="play_panel" class="panel right_panel">
      <button id="button1" class="control_button">Start Search</button>
      <button id="button2" class="control_button">Pause Search</button>
      <button id="button3" class="control_button">Clear Walls</button>
    </div>
    
    <div id="stats"></div>

    <footer>
      Project Hosted on <a href="https://github.com/ChangYi-Han/hen.js/blob/master/visual/index.html">Github</a>
    </footer>
   
  </body>
</html>  //此為index.html
